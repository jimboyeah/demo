<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <title> Hello BizCharts for React! </title>
        <script src="../js/react.development.js"> </script>
        <script src="../js/react-dom.development.js"> </script>
        <script src="../js/babel.min.js"> </script>
        <script src="../js/bizCharts-3.5.5/BizCharts.min.js"></script>

        <!-- 
        <script src="../js/BizCharts.min.js"></script>
        <script src="../js/data-set.min.js"></script>
        <script src="../js/jquery.min.js"></script>
        <script src="../js/bizcharts-plugin-slider.js"></script>
        <script src="../js/numeral.min.js"></script>
        <script src="../js/polyfill.min.js"></script>
        <script src="https://unpkg.com/bizcharts-plugin-slider@2.0.0/umd/bizcharts-plugin-slider.js"></script>
        <script src="https://cdn.staticfile.org/react/16.4.0/umd/react.development.js"> </script> 
        <script src="https://cdn.staticfile.org/react-dom/16.4.0/umd/react-dom.development.js"> </script>
        <script src="https://cdn.staticfile.org/babel-standalone/6.26.0/babel.min.js"> </script>
        <script src="https://unpkg.com/bizcharts@3.3.0/umd/BizCharts.min.js"></script>
        -->
        <link rel="stylesheet" href="theme.css">
        <style>#example { background:_white; }</style>
        <script>

            document.onclick = function(e){
                // document.body.className = document.body.className?"":"half" 
                render();
            }
        </script>
    </head>
    <body class="half">
        <div id="example"> </div>
        <script src="./utils.js"> </script>

    </body>
</html>

<script type="text/babel">
    // import {Component} from 'react';
    let Component = React.Component;
    
    // import { Chart, Axis, Legend, Tooltip, Geom } from 'bizcharts';
    // bizUtil.setTheme('dark');
    BizCharts.setTheme('dark');

    var 
    Axis = BizCharts.Axis,
    Chart = BizCharts.Chart,
    Coord = BizCharts.Coord,
    Facet = BizCharts.Facet,
    G2 = BizCharts.G2,
    Geom = BizCharts.Geom,
    Guide = BizCharts.Guide,
    Label = BizCharts.Label,
    Legend = BizCharts.Legend,
    Line = BizCharts.Line,
    Shape = BizCharts.Shape,
    Tooltip = BizCharts.Tooltip,
    Util = BizCharts.Util,
    View = BizCharts.View;
</script>

<script type="text/babel">
// import React from "react";
// import {G2, Chart, Geom, Axis, Tooltip, Coord, Label, Legend, View, Guide, Shape, Facet, Util } from "bizcharts";

class Bubbletext extends React.Component {
  render() {
    const { Line } = Guide;
    const data = [
      {x: 95.0, y: 95.0, z: 13.8, name: "BE", country: "Belgium"},
      {x: 86.5, y: 102.9,z: 14.7, name: "DE", country: "Germany"},
      {x: 80.8, y: 91.5, z: 15.8, name: "FI", country: "Finland"},
      {x: 80.4, y: 102.5,z: 12.0, name: "NL", country: "Netherlands"},
      {x: 80.3, y: 86.1, z: 11.8, name: "SE", country: "Sweden"},
      {x: 78.4, y: 70.1, z: 16.6, name: "ES", country: "Spain"},
      {x: 74.2, y: 68.5, z: 14.5, name: "FR", country: "France"},
      {x: 73.5, y: 83.1, z: 10.0, name: "NO", country: "Norway"},
      {x: 71.0, y: 93.2, z: 24.7, name: "UK", country: "United Kingdom"},
      {x: 69.2, y: 57.6, z: 10.4, name: "IT", country: "Italy"},
      {x: 68.6, y: 20.0, z: 16.0, name: "RU", country: "Russia"},
      {x: 65.5, y: 126.4,z: 35.3, name: "US", country: "United States"},
      {x: 65.4, y: 50.8, z: 28.5, name: "HU", country: "Hungary"},
      {x: 63.4, y: 51.8, z: 15.4, name: "PT", country: "Portugal"},
      {x: 64.0, y: 82.9, z: 31.3, name: "NZ", country: "New Zealand"}
    ];
    const cols = {
      x: {
        alias: "Daily fat intake",
        // 定义别名
        tickInterval: 5,
        // 自定义刻度间距
        nice: false,
        // 不对最大最小值优化
        max: 96,
        // 自定义最大值
        min: 62 // 自定义最小是
      },
      y: {
        alias: "Daily sugar intake",
        tickInterval: 50,
        nice: false,
        max: 165,
        min: 0
      },
      z: {
        alias: "Obesity(adults) %"
      }
    };
    return (
      <div>
        <Chart
          height={getRootHeight()} //window.innerHeight
          data={data}
          padding={[40, 40, 40, 90]}
          scale={cols}
          plotBackground={{
            stroke: "#ccc",
            // 边颜色
            lineWidth: 1 // 边框粗细
          }}
          forceFit
        >
          <Axis
            name="x"
            label={{
              formatter: val => {
                return val + " gr"; // 格式化坐标轴显示文本
              }
            }}
            grid={{
              lineStyle: {
                stroke: "#d9d9d9",
                lineWidth: 1,
                lineDash: [2, 2]
              }
            }}
          />
          <Axis
            name="y"
            title={{
              offset: 64
            }}
            label={{
              formatter: function(val) {
                if (val > 0) {
                  return val + " gr";
                }
              }
            }}
          />

          <Tooltip title="country" />
          <Geom
            type="point"
            position="x*y"
            color="#1890ff"
            style={{
              ineWidth: 1,
              stroke: "#1890ff"
            }}
            shape="circle"
            size={["z", [10, 40]]}
            tooltip="x*y*z"
            opacity={0.3}
          >
            <Label
              content="x*name"
              content="y*country"
              formatter={(val, item, index) => {
                return item.point.name + " " + val;
              }}
              offset={0}
              textStyle={{
                textAlign: "center",
                rotate: -45,
                fill: "#1890FF"
              }}
            />
          </Geom>
          <Guide>
            <Line
              start={["min", 50]}
              end={["max", 50]}
              text={{
                content: "Safe sugar intake 50g/day",
                position: "end",
                style: {
                  textAlign: "end"
                }
              }}
            />
            <Line
              start={[65, "min"]}
              end={[65, "max"]}
              text={{
                content: "Safe fat intake 65g/day",
                position: "end",
                autoRotate: false,
                style: {
                  textAlign: "start"
                }
              }}
            />
          </Guide>
        </Chart>
      </div>
    );
  }
}

// ReactDOM.render(<Bubbletext />, mountNode)


</script>


<script type="text/babel">
    const root = document.getElementById('example')
    function getRootHeight(){ //window.innerHeight
        let height = window.getComputedStyle(root).height;
        console.log("getComputedStyle", height, this);
        return parseInt(height);
    }
    function render(){
        ReactDOM.render(
            <Bubbletext /> , root
        );
    }
    window.onresize = function(e){
        render();
    }
    render();
</script>