<!DOCTYPE html>
<head>
	<meta charset="utf-8">
	<title>ECharts</title>
	<link rel="stylesheet" href="theme.css">
	<style>#example { background: rgba(255,255,255, 0.96) !important;} #toolbox {top:22vh}</style>
</head>
<body class="half">
	<!-- 为ECharts准备一个具备大小（宽高）的Dom -->
	<div id="example" style=""></div>

	<script src="./echarts-4.2.1/dist/echarts.js"></script><script src="./utils.js"></script>
	<script src="./echarts-4.2.1/dist/echarts-en.js"></script>
	<!-- <script src="../echarts-2.2.7/build/dist/echarts-all.js"></script> -->
	
	<!-- CDN 方式引入 -->
	<!-- <script src="https://cdn.bootcss.com/echarts/4.2.1/echarts.min.js"></script> -->

	<!-- 3D扩展 -->
	<!-- <script src="./echarts-4.2.1/dist/echarts-gl.js"></script> -->

	<!-- 需要百度地图与地图扩展 -->
	<!-- <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=p1EQvKECSm8LMV249TxNB2dT"></script> -->
	<!-- <script src="http://www.echartsjs.com/examples/vendors/echarts/extension/bmap.js?_v_=1536959211921"></script> -->
	<!-- <script src="./echarts-4.2.1/dist/extension/bmap.js"></script> -->
	
	<!-- 使用旧版离线地图 -->
	<script src="./map/js/world.js"></script>
	<!-- <script src="./map/js/china.js"></script> -->
	<!-- <script src="./map/js/province/guangdong.js"></script> -->

	<script type="text/javascript">


/* eslint no-plusplus:0 */
// import React, { Component } from 'react';
// import ReactEcharts from 'echarts-for-react';
// import 'echarts/lib/chart/map';
// import 'echarts/map/js/world';
// import 'echarts/map/js/china';
// import 'echarts/map/js/province/guangdong';

// import "echarts/config";

const v = [13, 6, 3, 3, 8, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, ];
const geoCoordMap = {
	'中国 · 深圳宝安': [114.004769, 22.571005],
	'北京': [116.395932, 39.923789],
	'东莞': [113.713287, 23.081045],
	'河源': [114.708466, 23.791396],
	'云浮': [112.013262, 22.937875],
	'汕头': [116.676977, 23.405665],
	'三亚': [109.520428, 18.292892],
	'贵阳': [106.395187, 26.414952],
	'重庆': [106.397487, 29.590443],
	'武汉': [114.308325, 30.550572],
	'上海': [121.538462, 31.217021],
	'兰州': [103.932249, 36.136418],
	'中国 · 浙江兰溪': [119.133, 29.12],
	'尼日利亚': [-4.388361, 11.186148],
	'美国洛杉矶': [-118.24311, 34.052713],
	'香港邦泰': [114.195466, 22.282751],
	'美国芝加哥': [-87.801833, 41.870975],

	'加纳库马西': [-4.62829, 7.72415],
	'英国曼彻斯特': [-1.657222, 51.886863],
	'德国汉堡': [10.01959, 54.38474],

	'哈萨克斯坦阿拉木图': [45.326912, 41.101891],

	'俄罗斯伊尔库茨克': [89.116876, 67.757906],
	'巴西': [-48.678945, -10.493623],
	'埃及达米埃塔': [31.815593, 31.418032],
	'西班牙巴塞罗纳': [2.175129, 41.385064],
	'柬埔寨金边': [104.88659, 11.545469],
	'意大利米兰': [9.189948, 45.46623],
	'乌拉圭蒙得维的亚': [-56.162231, -34.901113],
	'莫桑比克马普托': [32.608571, -25.893473],
	'阿尔及利亚阿尔及尔': [3.054275, 36.753027],

	'阿联酋迪拜': [55.269441, 25.204514],

	'匈牙利布达佩斯': [17.108519, 48.179162],
	'澳大利亚悉尼': [150.993137, -33.675509],
	'美国加州': [-121.910642, 41.38028],
	'澳大利亚墨尔本': [144.999416, -37.781726],
	'墨西哥': [-99.094092, 19.365711],
	'加拿大温哥华': [-123.023921, 49.311753],
};

const data = [
	{ name: '中国 · 深圳宝安', value: 769 },
	{ name: '北京', value: 932 },
	{ name: '东莞', value: 287 },
	{ name: '河源', value: 466 },
	{ name: '云浮', value: 262 },
	{ name: '汕头', value: 977 },
	{ name: '三亚', value: 428 },
	{ name: '贵阳', value: 187 },
	{ name: '重庆', value: 487 },
	{ name: '武汉', value: 325 },
	{ name: '上海', value: 462 },
	{ name: '兰州', value: 249 },

	{ name: '中国 · 浙江兰溪', value: 10, },
	{ name: '尼日利亚', value: 10, },
	{ name: '美国洛杉矶', value: 20, },
	{ name: '香港邦泰', value: 20, },
	{ name: '美国芝加哥', value: 50, },
	{ name: '加纳库马西', value: 64, },
	{ name: '英国曼彻斯特', value: 68, },
	{ name: '德国汉堡', value: 45, },
	{ name: '哈萨克斯坦阿拉木图', value: 10, },
	{ name: '俄罗斯伊尔库茨克', value: 10, },
	{ name: '巴西', value: 20, },
	{ name: '埃及达米埃塔', value: 50, },
	{ name: '西班牙巴塞罗纳', value: 58, },
	{ name: '柬埔寨金边', value: 64, },
	{ name: '意大利米兰', value: 68, },
	{ name: '乌拉圭蒙得维的亚', value: 45, },
	{ name: '莫桑比克马普托', value: 50, },
	{ name: '阿尔及利亚阿尔及尔', value: 58, },
	{ name: '阿联酋迪拜', value: 64, },
	{ name: '匈牙利布达佩斯', value: 68, },
	{ name: '澳大利亚悉尼', value: 45, },
	{ name: '美国加州', value: 68, },
	{ name: '澳大利亚墨尔本', value: 45, },
	{ name: '墨西哥', value: 45, },
	{ name: '加拿大温哥华', value: 45, },
];

function formtGCData(geoData, gcData, srcNam, dest) {
	const tGeoDt = [];
	gcData.map((value) => {
		if (srcNam !== value.name) {
			if (dest) {
				tGeoDt.push({
					coords: [geoData[srcNam], geoData[value.name]],
				});
			} else {
				tGeoDt.push({
					coords: [geoData[value.name], geoData[srcNam]],
				});
			}
		}
		return null;
	});
	return tGeoDt;
}

function formtVData(geoData, vData, srcNam) {
	const tGeoDt = [];
	for (let i = 0, len = vData.length; i < len; i++) {
		const tNam = vData[i].name;
		if (srcNam !== tNam) {
			tGeoDt.push({
				name: tNam,
				value: geoData[tNam],
				symbolSize: v[i],
				itemStyle: {
					normal: {
						color: '#FFD24D',
						borderColor: 'gold',
					},
				},
			});
		}
	}
	tGeoDt.push({
		name: srcNam,
		value: geoData[srcNam],
		symbolSize: 8,
		itemStyle: {
			normal: {
				color: '#4DFFFF',
				borderColor: '#fff',
			},
		},
	});
	return tGeoDt;
}

var planePath = 'path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z';
// const planePath = 'arrow'; // 'circle', 'rect', 'roundRect', 'triangle', 'diamond', 'pin', 'arrow', 'none', 'image://url', dataURI

const option = {
	backgroundColor: 'transparent',
	backgroundColor: '#18003D',
	legend: {
		orient: 'vertical',
		top:"bottom",
		left:"right",
		data:['serA', 'serB', 'serC'],
		textStyle: { color:"white" }

	},
	geo: {
		name: 'Enroll distribution',
		type: 'map',
		map: 'world',
		label: {
			emphasis: {
				show: false,
			},
		},
		itemStyle: {
			normal: {
				areaColor: '#022548',
				borderColor: '#0DABEA',
			},
			emphasis: {
				areaColor: '#011B34',
			},
		},
	},
    bmap: { // 百度地图配置
        center: [104.114129, 37.550339],
        center: [108.95,34.27], // XiAn
        center: [104.73,31.48], // "绵阳"
        zoom: 5,
        roam: true,
        mapStyle: {
            styleJson: [
                {"featureType": "water",    "elementType": "all",       "stylers": {"color": "#044161"} },
                {"featureType": "land",     "elementType": "all",       "stylers": {"color": "#004981"} },
                {"featureType": "boundary", "elementType": "geometry",  "stylers": {"color": "#064f85"} },
                {"featureType": "railway",  "elementType": "all",       "stylers": {"visibility": "off"} },
                {"featureType": "highway",  "elementType": "geometry",  "stylers": {"color": "#004981"} },
                {"featureType": "highway",  "elementType": "geometry.fill","stylers": {"color": "#005b96", "lightness": 1 } },
                {"featureType": "highway",  "elementType": "labels",        "stylers": {"visibility": "off"} },
                {"featureType": "arterial", "elementType": "geometry",      "stylers": {"color": "#004981"} },
                {"featureType": "arterial", "elementType": "geometry.fill", "stylers": {"color": "#00508b"} },
                {"featureType": "poi",      "elementType": "all",       "stylers": {"visibility": "off"} },
                {"featureType": "green",    "elementType": "all",       "stylers": {"color": "#056197", "visibility": "off"} },
                {"featureType": "subway",   "elementType": "all",       "stylers": {"visibility": "off"} },
                {"featureType": "manmade",  "elementType": "all",       "stylers": {"visibility": "off"} },
                {"featureType": "local",    "elementType": "all",       "stylers": {"visibility": "off"} },
                {"featureType": "arterial", "elementType": "labels",    "stylers": {"visibility": "off"} },
                {"featureType": "boundary", "elementType": "geometry.fill","stylers": {"color": "#029fd4"} },
                {"featureType": "building", "elementType": "all",       "stylers": {"color": "#1a5787"} },
                {"featureType": "label",    "elementType": "all",       "stylers": {"visibility": "off"} }
            ]
        }
    },
	series: [
		{
			name:'serA',
			type: 'lines',
			zlevel: 2,
			effect: {
				show: true,
				period: 3,
				trailLength: 0,
				color: '#FFB973',
				symbol: planePath,
				symbolSize: 15,
			},
			lineStyle: {
				normal: {
					color: '#FFB973',
					width: 0,
					opacity: 0.2,
					curveness: 0,
				},
			},
			data: formtGCData(geoCoordMap, data, '中国 · 深圳宝安', true),
		},
		{
			name:'serB',
			type: 'lines',
			zlevel: 2,
			effect: {
				show: true,
				period: 6,
				trailLength: 0.1,
				color: '#9CE6FE',
				symbol: planePath,
				symbolSize: 5,
			},
			lineStyle: {
				normal: {
					color: '#65A2C2',
					width: 0,
					opacity: 0.4,
					curveness: 0,
				},
			},
			data: formtGCData(geoCoordMap, data, '中国 · 深圳宝安', false),
		},
		{
			name:'serC',
			type: 'effectScatter',
			coordinateSystem: 'bmap',
			coordinateSystem: 'geo',
			zlevel: 2,
			rippleEffect: {
				period: 4,
				scale: 4,
				brushType: 'stroke',
			},
			label: {
				normal: {
					show: false,
					position: 'right',
					formatter: '{b}',
				},
			},
			symbolSize: 5,
			itemStyle: {
				normal: {
					color: '#fff',
					borderColor: 'gold',
				},
			},
			data: formtVData(geoCoordMap, data, '中国 · 深圳宝安'),
		},
	],
};

// export default class Map extends Component {
//   static displayName = 'Map';

//   static propTypes = {};

//   static defaultProps = {};

//   constructor(props) {
//     super(props);
//     this.state = {};
//   }

//   onSelect = (e) => {
//     console.log("onSelect...", e);
//   }
	
//   onClick = (e) => {
//     console.log("onClick...", e);
//   }
	
//   onlegendselectchanged = (e) => {
//     console.log("onlegendselectchanged...", e);
//   }

//   render() {
//     return (
//       <div>
//         <ReactEcharts onEvents={{ geoselected: this.onSelect, click: this.onClick }} option={option} style={{ height: '650px' }} />
//       </div>
//     );
//   }
// }


		var myChart;
		render(option)

		myChart.on('click', "series", function (e) {
				console.log("on series click", echarts.version, e);
		});
		myChart.on('geoselected', function (e) {
				console.log("on geoselected", echarts.version, e);
		});
		myChart.on('legendselectchanged', function (e) {
				console.log("on legendselectchanged", echarts.version, e);
		});


		// 图表渲染方法
		function render(option) {
				// 基于准备好的dom，初始化echarts图表
				myChart = echarts.init(document.getElementById('example')); 
				// 为echarts对象加载数据 
				myChart.setOption(option);
		}
		</script>

</body>