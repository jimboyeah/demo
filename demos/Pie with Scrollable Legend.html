<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <title>ECharts</title>
    <link rel="stylesheet" href="theme.css">
    <style>#example { background: rgba(255,255,255, 0.96) !important;} #toolbox {top:22vh}</style>
</head>
<body class="half">
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
    <div id="example" style=""></div>

    <!-- <script src="../echarts-2.2.7/build/dist/echarts-all.js"></script> -->
    <script src="./echarts-4.2.1/dist/echarts.js"></script><script src="./utils.js"></script>
    <script src="./echarts-4.2.1/dist/echarts-en.js"></script>
    <!-- CDN 方式引入 -->
    <!-- <script src="https://cdn.bootcss.com/echarts/4.2.1/echarts.min.js"></script> -->

    <!-- 需要3D扩展 -->
    <script src="./echarts-4.2.1/dist/echarts-gl.js"></script>


    <script type="text/javascript">

    // import React, { Component, PropTypes } from 'react';
    // import echarts from 'echarts';
    // import echarts from 'echarts-gl'
    // import bmap from 'echarts/extension/bmap/bmap';


    var data = genData(50);

    option = {
        title : {
            text: '同名数量统计',
            subtext: '纯属虚构',
            x:'center'
        },
        tooltip : {
            trigger: 'item',
            // {a} series.name {b} data.name {c} data.value {d} data.value percent 
            formatter: "{a} <br/>{b} : {c} ({d}%)"
        },
        legend: {
            type: 'scroll',
            orient: 'vertical',
            right: 10,
            top: 20,
            bottom: 20,
            data: data.legendData,

            selected: data.selected
        },
        series : [
            {
                name: '姓名',
                type: 'pie',
                radius : ['10%', '55%'],
                center: ['40%', '50%'],
                avoidLabelOverlap: true,
                label: {
                    normal:{
                        // {a} series.name {b} data.name {c} data.value {d} data.value percent 
                        // formatter: '{a|{a}}{abg|}\n{hr|}\n  {b|{b}：}{c}  {per|{d}%}  ',
                        formatter: '{a|{a}} {per|{d}%}  ',
                        rich: {
                            a: {
                                color: '#999',
                                lineHeight: 22,
                                align: 'center'
                            },
                            hr: {
                                borderColor: '#aaa',
                                width: '100%',
                                borderWidth: 0.5,
                                height: 0
                            },
                            b: {
                                fontSize: 16,
                                lineHeight: 33
                            },
                            per: {
                                color: '#eee',
                                backgroundColor: '#334455',
                                padding: [2, 4],
                                borderRadius: 2
                            }
                        }
                    }
                },
                data: data.seriesData,
                itemStyle: {
                    emphasis: {
                        shadowBlur: 10,
                        shadowOffsetX: 0,
                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                }
            }
        ]
    };

    function genData(count) {
        var nameList = [
            '赵', '钱', '孙', '李', '周', '吴', '郑', '王', '冯', '陈', '褚', '卫', '蒋', '沈', '韩', '杨', '朱', '秦', '尤', '许', '何', '吕', '施', '张', '孔', '曹', '严', '华', '金', '魏', '陶', '姜', '戚', '谢', '邹', '喻', '柏', '水', '窦', '章', '云', '苏', '潘', '葛', '奚', '范', '彭', '郎', '鲁', '韦', '昌', '马', '苗', '凤', '花', '方', '俞', '任', '袁', '柳', '酆', '鲍', '史', '唐', '费', '廉', '岑', '薛', '雷', '贺', '倪', '汤', '滕', '殷', '罗', '毕', '郝', '邬', '安', '常', '乐', '于', '时', '傅', '皮', '卞', '齐', '康', '伍', '余', '元', '卜', '顾', '孟', '平', '黄', '和', '穆', '萧', '尹', '姚', '邵', '湛', '汪', '祁', '毛', '禹', '狄', '米', '贝', '明', '臧', '计', '伏', '成', '戴', '谈', '宋', '茅', '庞', '熊', '纪', '舒', '屈', '项', '祝', '董', '梁', '杜', '阮', '蓝', '闵', '席', '季', '麻', '强', '贾', '路', '娄', '危'
        ];
        var legendData = [];
        var seriesData = [];
        var selected = {};
        for (var i = 0; i < 50; i++) {
            name = Math.random() > 0.65
                ? makeWord(4, 1) + '·' + makeWord(3, 0)
                : makeWord(2, 1);
            legendData.push(name);
            seriesData.push({
                name: name,
                value: Math.round(Math.random() * 100000)
            });
            selected[name] = i < 6;
        }

        return {
            legendData: legendData,
            seriesData: seriesData,
            selected: selected
        };

        function makeWord(max, min) {
            var nameLen = Math.ceil(Math.random() * max + min);
            var name = [];
            for (var i = 0; i < nameLen; i++) {
                name.push(nameList[Math.round(Math.random() * nameList.length - 1)]);
            }
            return name.join('');
        }
    }



    var myChart;
    render(option);

    var radius = 0;
    var radiusI = [
        parseInt(option.series[0].radius[0]),
        parseInt(option.series[0].radius[1])
        ];
    // setInterval(()=>{
    //     radius = (++radius)%25
    //     var ras = option.series[0].radius;
    //     ras[0] = (radiusI[0]+radius)+"%";
    //     // ras[1] = (radiusI[1]+radius)+"%";
    //     option.series[0].radius = ras;
    //     console.log(radius, radiusI,  ras);
    //     myChart.setOption(option)
    // }, 80);

    myChart.on('click', 'series', function (e) {
        console.log("on series click", echarts.version, e);
    });
    myChart.on('dblclick', 'series', function (e) {
        console.log("on series dblclick", echarts.version, e);
    });


    // 图表渲染方法
    function render(option) {
        // 基于准备好的dom，初始化echarts图表
        myChart = echarts.init(document.getElementById('example')); 
        // 为echarts对象加载数据 
        myChart.setOption(option);
    }
    </script>

</body>